'\" t
.\" Automatically generated by Pandoc 2.14
.\"
.TH "TIMELINE" "7" "2021-06-07" "Timeline v1.8-26-gbc91425" "Timeline Manual"
.hy
.SH NAME
.PP
timeline - Internal information about Timeline
.SH SYNOPSYS
.PP
\f[I]tl\f[R] *
.SH DESCRIPTION
.PP
This document will explain the internals of the Timeline, including a
lot of important concepts to understand how Timeline works.
.PP
Timeline is a distributed social network built on the top of git, which
means that any account of the network is a git repository.
.PP
\f[B]NOTE\f[R]: Before reading this document please be sure that you
have been read and understand the \f[B]BASIC CONCEPTS\f[R] and
\f[B]TERMINOLOGY\f[R] defined in \f[B]tl\f[R](1) man page.
.SH INSIDE THE GIT REPO
.PP
The git repository of a Timeline account will contain, mandatory a file
called \f[I]CONTENT\f[R], and optional a directory \f[I]FOLLOW\f[R].
Of course, you can add any other files to the repo without problems.
.SS The CONTENT file
.PP
This file contents the events (one event per line) of the account:
posts, replies, etc.
And must have the following format:
.IP
.nf
\f[C]
timestamp kind body
\f[R]
.fi
.PP
Where
.TP
\f[I]timestamp\f[R]
Is the UNIX timestamp in seconds when the event was created
.TP
\f[I]kind\f[R]
The type of the event, could be one of the following: \f[I]P\f[R] (for
posts), \f[I]R\f[R] (for replies), \f[I]T\f[R] (for tags), \f[I]S\f[R]
(for scores) and \f[I]E\f[R] (for encrypted events).
.TP
\f[I]body\f[R]
The content of the message which depend on the \f[I]kind\f[R]
.PP
Empty lines or lines began with \f[I]#\f[R] sign will be ignored.
.PP
The body format depend on the kind of the event, following the next
table:
.PP
.TS
tab(@);
lw(11.7n) lw(15.6n) lw(25.3n) lw(17.5n).
T{
Kind
T}@T{
Format
T}@T{
Description
T}@T{
Example
T}
_
T{
P
T}@T{
\f[I]text\f[R]
T}@T{
* \f[I]text\f[R] is text of the post
T}@T{
\f[C]P This is a message\f[R]
T}
T{
R
T}@T{
\f[I]ref\f[R] \f[I]text\f[R]
T}@T{
* \f[I]ref\f[R] is the reference to the post to reply.
See \f[B]REFERENCES\f[R] section below for more information.
T}@T{
\f[C]R d4473ee7d3ba45a29efed144f43cc20cc2801be9:1618423758 This is a reply\f[R]
T}
T{
T}@T{
T}@T{
* \f[I]text\f[R] is the text of the reply.
T}@T{
T}
T{
T
T}@T{
\f[I]ref\f[R] \f[I]tag\f[R]
T}@T{
* \f[I]ref\f[R] is the reference to the post to tag.
See \f[B]REFERENCES\f[R] section below for more information.
T}@T{
\f[C]T d4473ee7d3ba45a29efed144f43cc20cc2801be9:1618423758 tag\f[R]
T}
T{
T}@T{
T}@T{
* \f[I]tag\f[R] is the tag to set
T}@T{
T}
T{
S
T}@T{
\f[I]ref\f[R] \f[I]score\f[R]
T}@T{
* \f[I]ref\f[R] is the reference to the post to score See
\f[B]REFERENCES\f[R] section below for more information.
T}@T{
\f[C]S d4473ee7d3ba45a29efed144f43cc20cc2801be9:1618423758 1\f[R]
T}
T{
T}@T{
T}@T{
* \f[I]score\f[R] is 1 or -1 indicating the score of the event which
refer.
T}@T{
T}
T{
E
T}@T{
account text
T}@T{
* \f[I]account\f[R] is the account OID of the recipient, or
\f[I]\[at]all\f[R] for anonymous recipient (see \f[B]tl-crypto\f[R](1)
for more information).
T}@T{
\f[C]E d4473ee7d3ba45a29efed144f43cc20cc2801be9 ZnNkZHNmc2Rmc2QK\f[R]
T}
T{
T}@T{
T}@T{
* \f[I]text\f[R] is the cryptogram encoded in BASE64.
T}@T{
T}
.TE
.PP
Here you have a full example of the CONTENT file:
.IP
.nf
\f[C]
1618138838 R d4473ee7d3ba45a29efed144f43cc20cc2801be9:1618138287 This is a reply of initial message, which is also tagged as initial
1618138707 T d4473ee7d3ba45a29efed144f43cc20cc2801be9:1618138287 initial
1618138287 P Initial message
\f[R]
.fi
.SS The FOLLOW directory
.PP
This directory contains the repositories of the accounts that you
follow.
All directories inside these folders will be git submodules of the main
account.
.PP
These accounts will follow the same pattern that the main account.
.SS The ENCRKEY and SIGNKEY files
.PP
These files contain the public keyring used for encryption and signing
respectively.
Usually these files are generated with \f[B]tl-account\f[R](1)
\f[I]keygen\f[R] subcommand, but you can create it manually.
The expected format is an OpenPGP armored public key (although binary
format can work too, is not recommended avoiding git problems managing
binary files).
.SH REFERENCES
.PP
The references are a way to identify an event in the network.
A reference is an EID (event identifier) which has the following format:
.PP
\f[C]\[rs]<account\[rs]>:\[rs]<timestamp\[rs]>[:\[rs]<hmac\[rs]>]\f[R]
.PP
Where:
.TP
\f[I]account\f[R]
Is the account OID of the account which store the message to refer.
.TP
\f[I]timestamp\f[R]
The timestamp of the event to refer, as is found in the CONTENT file of
the \f[I]account\f[R].
.TP
\f[I]hmac\f[R]
(Only from version 1.8) the signature of the message to refer to avoid
stamping.
This signature is created applied the object algorithm in git (usually
SHA1, but experimental SHA256 is available, read
\f[B]tl-account\f[R](1)), to prevent the owner of the post can edit
manually the CONTENT and change the message once it gets some
engagement.
This feature can be enabled or disabled via \f[B]tl-config\f[R](1), see
\f[B]tl-timeline\f[R](1) to find the proper configuration setting to do
that.
.SH SEE ALSO
.PP
\f[B]tl-tutorial\f[R](7), \f[B]tl\f[R](1), \f[B]tl-config\f[R](1),
\f[B]tl-account\f[R](1), \f[B]tl-timeline\f[R](1).
.SH TIMELINE
.PP
Part of the \f[B]tl\f[R](1) suite.
